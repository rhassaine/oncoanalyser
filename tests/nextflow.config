/*
========================================================================================
    Nextflow config file for running nf-test tests
========================================================================================
*/

aws.client.anonymous = true // fixes S3 access issues on self-hosted runners

// Override reference data paths to use locally downloaded data in CI
// The reference_data/ directory is populated by the prepare_reference mode in CI workflow
// which downloads ~25GB of WiGiTS toolkit data from Hartwig's R2 CDN before running tests
def referenceDataDir = new File("${projectDir}/../reference_data/2.2.0").exists() ?
    "${projectDir}/../reference_data/2.2.0" :
    null

if (referenceDataDir) {
    params.hmf_genomes_base = "${referenceDataDir}/genomes"
    // Note: HMF data files are downloaded to reference_data/2.2.0/hmf_data/
    // The pipeline will automatically find them there via the default config paths
}
